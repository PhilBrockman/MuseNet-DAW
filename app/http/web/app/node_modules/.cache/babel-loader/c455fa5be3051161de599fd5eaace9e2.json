{"ast":null,"code":"//    abc_create_time_signature.js\n//    Copyright (C) 2010-2018 Gregory Dyke (gregdyke at gmail dot com) and Paul Rosen\n//\n//    Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated\n//    documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation\n//    the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and\n//    to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n//\n//    The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n//\n//    THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING\n//    BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n//    NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n//    DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n//    OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\nvar AbsoluteElement = require('./abc_absolute_element');\n\nvar glyphs = require('./abc_glyphs');\n\nvar RelativeElement = require('./abc_relative_element');\n\nvar createTimeSignature;\n\n(function () {\n  \"use strict\";\n\n  createTimeSignature = function (elem, tuneNumber) {\n    var abselem = new AbsoluteElement(elem, 0, 10, 'staff-extra', tuneNumber);\n\n    if (elem.type === \"specified\") {\n      //TODO make the alignment for time signatures centered\n      for (var i = 0; i < elem.value.length; i++) {\n        if (i !== 0) abselem.addRight(new RelativeElement('+', i * 20 - 9, glyphs.getSymbolWidth(\"+\"), 6, {\n          thickness: glyphs.symbolHeightInPitches(\"+\")\n        }));\n\n        if (elem.value[i].den) {\n          // TODO-PER: get real widths here, also center the num and den.\n          abselem.addRight(new RelativeElement(elem.value[i].num, i * 20, glyphs.getSymbolWidth(elem.value[i].num.charAt(0)) * elem.value[i].num.length, 8, {\n            thickness: glyphs.symbolHeightInPitches(elem.value[i].num.charAt(0))\n          }));\n          abselem.addRight(new RelativeElement(elem.value[i].den, i * 20, glyphs.getSymbolWidth(elem.value[i].den.charAt(0)) * elem.value[i].den.length, 4, {\n            thickness: glyphs.symbolHeightInPitches(elem.value[i].den.charAt(0))\n          }));\n        } else {\n          abselem.addRight(new RelativeElement(elem.value[i].num, i * 20, glyphs.getSymbolWidth(elem.value[i].num.charAt(0)) * elem.value[i].num.length, 6, {\n            thickness: glyphs.symbolHeightInPitches(elem.value[i].num.charAt(0))\n          }));\n        }\n      }\n    } else if (elem.type === \"common_time\") {\n      abselem.addRight(new RelativeElement(\"timesig.common\", 0, glyphs.getSymbolWidth(\"timesig.common\"), 6, {\n        thickness: glyphs.symbolHeightInPitches(\"timesig.common\")\n      }));\n    } else if (elem.type === \"cut_time\") {\n      abselem.addRight(new RelativeElement(\"timesig.cut\", 0, glyphs.getSymbolWidth(\"timesig.cut\"), 6, {\n        thickness: glyphs.symbolHeightInPitches(\"timesig.cut\")\n      }));\n    }\n\n    return abselem;\n  };\n})();\n\nmodule.exports = createTimeSignature;","map":{"version":3,"sources":["/Users/philbrockman/coding/MusicalGens/app/http/web/app/node_modules/abcjs/src/write/abc_create_time_signature.js"],"names":["AbsoluteElement","require","glyphs","RelativeElement","createTimeSignature","elem","tuneNumber","abselem","type","i","value","length","addRight","getSymbolWidth","thickness","symbolHeightInPitches","den","num","charAt","module","exports"],"mappings":"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","sourcesContent":["//    abc_create_time_signature.js\n//    Copyright (C) 2010-2018 Gregory Dyke (gregdyke at gmail dot com) and Paul Rosen\n//\n//    Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated\n//    documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation\n//    the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and\n//    to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n//\n//    The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n//\n//    THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING\n//    BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n//    NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n//    DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n//    OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar AbsoluteElement = require('./abc_absolute_element');\nvar glyphs = require('./abc_glyphs');\nvar RelativeElement = require('./abc_relative_element');\n\nvar createTimeSignature;\n\n(function() {\n\t\"use strict\";\n\n\tcreateTimeSignature = function(elem, tuneNumber) {\n\t\tvar abselem = new AbsoluteElement(elem,0,10, 'staff-extra', tuneNumber);\n\t\tif (elem.type === \"specified\") {\n\t\t\t//TODO make the alignment for time signatures centered\n\t\t\tfor (var i = 0; i < elem.value.length; i++) {\n\t\t\t\tif (i !== 0)\n\t\t\t\t\tabselem.addRight(new RelativeElement('+', i*20-9, glyphs.getSymbolWidth(\"+\"), 6, { thickness: glyphs.symbolHeightInPitches(\"+\") }));\n\t\t\t\tif (elem.value[i].den) {\n\t\t\t\t\t// TODO-PER: get real widths here, also center the num and den.\n\t\t\t\t\tabselem.addRight(new RelativeElement(elem.value[i].num, i*20, glyphs.getSymbolWidth(elem.value[i].num.charAt(0))*elem.value[i].num.length, 8, { thickness: glyphs.symbolHeightInPitches(elem.value[i].num.charAt(0)) }));\n\t\t\t\t\tabselem.addRight(new RelativeElement(elem.value[i].den, i*20, glyphs.getSymbolWidth(elem.value[i].den.charAt(0))*elem.value[i].den.length, 4, { thickness: glyphs.symbolHeightInPitches(elem.value[i].den.charAt(0)) }));\n\t\t\t\t} else {\n\t\t\t\t\tabselem.addRight(new RelativeElement(elem.value[i].num, i*20, glyphs.getSymbolWidth(elem.value[i].num.charAt(0))*elem.value[i].num.length, 6, { thickness: glyphs.symbolHeightInPitches(elem.value[i].num.charAt(0)) }));\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (elem.type === \"common_time\") {\n\t\t\tabselem.addRight(new RelativeElement(\"timesig.common\", 0, glyphs.getSymbolWidth(\"timesig.common\"), 6, { thickness: glyphs.symbolHeightInPitches(\"timesig.common\") }));\n\n\t\t} else if (elem.type === \"cut_time\") {\n\t\t\tabselem.addRight(new RelativeElement(\"timesig.cut\", 0, glyphs.getSymbolWidth(\"timesig.cut\"), 6, { thickness: glyphs.symbolHeightInPitches(\"timesig.cut\") }));\n\t\t}\n\t\treturn abselem;\n\t};\n})();\n\nmodule.exports = createTimeSignature;\n"]},"metadata":{},"sourceType":"script"}