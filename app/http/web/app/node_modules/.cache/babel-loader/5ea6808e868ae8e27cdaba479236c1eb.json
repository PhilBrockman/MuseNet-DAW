{"ast":null,"code":"//    abc_create_clef.js\n//    Copyright (C) 2010-2018 Gregory Dyke (gregdyke at gmail dot com) and Paul Rosen\n//\n//    Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated\n//    documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation\n//    the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and\n//    to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n//\n//    The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n//\n//    THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING\n//    BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n//    NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n//    DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n//    OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\nvar AbsoluteElement = require('./abc_absolute_element');\n\nvar glyphs = require('./abc_glyphs');\n\nvar RelativeElement = require('./abc_relative_element');\n\nvar createClef;\n\n(function () {\n  \"use strict\";\n\n  createClef = function (elem, tuneNumber) {\n    var clef;\n    var octave = 0;\n    var abselem = new AbsoluteElement(elem, 0, 10, 'staff-extra', tuneNumber);\n\n    switch (elem.type) {\n      case \"treble\":\n        clef = \"clefs.G\";\n        break;\n\n      case \"tenor\":\n        clef = \"clefs.C\";\n        break;\n\n      case \"alto\":\n        clef = \"clefs.C\";\n        break;\n\n      case \"bass\":\n        clef = \"clefs.F\";\n        break;\n\n      case 'treble+8':\n        clef = \"clefs.G\";\n        octave = 1;\n        break;\n\n      case 'tenor+8':\n        clef = \"clefs.C\";\n        octave = 1;\n        break;\n\n      case 'bass+8':\n        clef = \"clefs.F\";\n        octave = 1;\n        break;\n\n      case 'alto+8':\n        clef = \"clefs.C\";\n        octave = 1;\n        break;\n\n      case 'treble-8':\n        clef = \"clefs.G\";\n        octave = -1;\n        break;\n\n      case 'tenor-8':\n        clef = \"clefs.C\";\n        octave = -1;\n        break;\n\n      case 'bass-8':\n        clef = \"clefs.F\";\n        octave = -1;\n        break;\n\n      case 'alto-8':\n        clef = \"clefs.C\";\n        octave = -1;\n        break;\n\n      case 'none':\n        return null;\n\n      case 'perc':\n        clef = \"clefs.perc\";\n        break;\n\n      default:\n        abselem.addChild(new RelativeElement(\"clef=\" + elem.type, 0, 0, undefined, {\n          type: \"debug\"\n        }));\n    } // if (elem.verticalPos) {\n    // pitch = elem.verticalPos;\n    // }\n\n\n    var dx = 5;\n\n    if (clef) {\n      abselem.addRight(new RelativeElement(clef, dx, glyphs.getSymbolWidth(clef), elem.clefPos));\n\n      if (clef === 'clefs.G') {\n        abselem.top = 13;\n        abselem.bottom = -1;\n      } else {\n        abselem.top = 10;\n        abselem.bottom = 2;\n      }\n\n      if (octave !== 0) {\n        var scale = 2 / 3;\n        var adjustspacing = (glyphs.getSymbolWidth(clef) - glyphs.getSymbolWidth(\"8\") * scale) / 2;\n        abselem.addRight(new RelativeElement(\"8\", dx + adjustspacing, glyphs.getSymbolWidth(\"8\") * scale, octave > 0 ? abselem.top + 3 : abselem.bottom - 1, {\n          scalex: scale,\n          scaley: scale\n        }));\n        abselem.top += 2;\n      }\n    }\n\n    return abselem;\n  };\n})();\n\nmodule.exports = createClef;","map":{"version":3,"sources":["/Users/philbrockman/coding/MusicalGens/app/http/web/app/node_modules/abcjs/src/write/abc_create_clef.js"],"names":["AbsoluteElement","require","glyphs","RelativeElement","createClef","elem","tuneNumber","clef","octave","abselem","type","addChild","undefined","dx","addRight","getSymbolWidth","clefPos","top","bottom","scale","adjustspacing","scalex","scaley","module","exports"],"mappings":"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","sourcesContent":["//    abc_create_clef.js\n//    Copyright (C) 2010-2018 Gregory Dyke (gregdyke at gmail dot com) and Paul Rosen\n//\n//    Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated\n//    documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation\n//    the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and\n//    to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n//\n//    The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n//\n//    THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING\n//    BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n//    NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n//    DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n//    OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar AbsoluteElement = require('./abc_absolute_element');\nvar glyphs = require('./abc_glyphs');\nvar RelativeElement = require('./abc_relative_element');\n\nvar createClef;\n\n(function() {\n\t\"use strict\";\n\n\tcreateClef = function(elem, tuneNumber) {\n\t\tvar clef;\n\t\tvar octave = 0;\n\t\tvar abselem = new AbsoluteElement(elem,0,10, 'staff-extra', tuneNumber);\n\t\tswitch (elem.type) {\n\t\t\tcase \"treble\": clef = \"clefs.G\"; break;\n\t\t\tcase \"tenor\": clef=\"clefs.C\"; break;\n\t\t\tcase \"alto\": clef=\"clefs.C\"; break;\n\t\t\tcase \"bass\": clef=\"clefs.F\"; break;\n\t\t\tcase 'treble+8': clef = \"clefs.G\"; octave = 1; break;\n\t\t\tcase 'tenor+8':clef=\"clefs.C\"; octave = 1; break;\n\t\t\tcase 'bass+8': clef=\"clefs.F\"; octave = 1; break;\n\t\t\tcase 'alto+8': clef=\"clefs.C\"; octave = 1; break;\n\t\t\tcase 'treble-8': clef = \"clefs.G\"; octave = -1; break;\n\t\t\tcase 'tenor-8':clef=\"clefs.C\"; octave = -1; break;\n\t\t\tcase 'bass-8': clef=\"clefs.F\"; octave = -1; break;\n\t\t\tcase 'alto-8': clef=\"clefs.C\"; octave = -1; break;\n\t\t\tcase 'none': return null;\n\t\t\tcase 'perc': clef=\"clefs.perc\"; break;\n\t\t\tdefault: abselem.addChild(new RelativeElement(\"clef=\"+elem.type, 0, 0, undefined, {type:\"debug\"}));\n\t\t}\n\t\t// if (elem.verticalPos) {\n\t\t// pitch = elem.verticalPos;\n\t\t// }\n\t\tvar dx =5;\n\t\tif (clef) {\n\t\t\tabselem.addRight(new RelativeElement(clef, dx, glyphs.getSymbolWidth(clef), elem.clefPos));\n\n\t\t\tif (clef === 'clefs.G') {\n\t\t\t\tabselem.top = 13;\n\t\t\t\tabselem.bottom = -1;\n\t\t\t} else {\n\t\t\t\tabselem.top = 10;\n\t\t\t\tabselem.bottom = 2;\n\t\t\t}\n\t\t\tif (octave !== 0) {\n\t\t\t\tvar scale = 2 / 3;\n\t\t\t\tvar adjustspacing = (glyphs.getSymbolWidth(clef) - glyphs.getSymbolWidth(\"8\") * scale) / 2;\n\t\t\t\tabselem.addRight(new RelativeElement(\"8\", dx + adjustspacing, glyphs.getSymbolWidth(\"8\") * scale, (octave > 0) ? abselem.top + 3 : abselem.bottom - 1, {\n\t\t\t\t\tscalex: scale,\n\t\t\t\t\tscaley: scale\n\t\t\t\t}));\n\t\t\t\tabselem.top += 2;\n\t\t\t}\n\t\t}\n\t\treturn abselem;\n\t};\n\n})();\n\nmodule.exports = createClef;\n"]},"metadata":{},"sourceType":"script"}