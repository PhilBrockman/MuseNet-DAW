{"ast":null,"code":"//    abc_ending_element.js: Definition of the EndingElement class.\n//    Copyright (C) 2010-2018 Gregory Dyke (gregdyke at gmail dot com) and Paul Rosen\n//\n//    Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated\n//    documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation\n//    the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and\n//    to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n//\n//    The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n//\n//    THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING\n//    BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n//    NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n//    DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n//    OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\nvar sprintf = require('./sprintf');\n\nvar EndingElem = function EndingElem(text, anchor1, anchor2) {\n  this.text = text; // text to be displayed top left\n\n  this.anchor1 = anchor1; // must have a .x property or be null (means starts at the \"beginning\" of the line - after keysig)\n\n  this.anchor2 = anchor2; // must have a .x property or be null (means ends at the end of the line)\n\n  this.endingHeightAbove = 5;\n  this.pitch = undefined; // This will be set later\n};\n\nEndingElem.prototype.setUpperAndLowerElements = function (positionY) {\n  this.pitch = positionY.endingHeightAbove - 2;\n};\n\nEndingElem.prototype.draw = function (renderer, linestartx, lineendx) {\n  if (this.pitch === undefined) window.console.error(\"Ending Element y-coordinate not set.\");\n  var y = renderer.calcY(this.pitch);\n  var height = 20;\n  var pathString;\n\n  if (this.anchor1) {\n    linestartx = this.anchor1.x + this.anchor1.w;\n    pathString = sprintf(\"M %f %f L %f %f\", linestartx, y, linestartx, y + height);\n    renderer.printPath({\n      path: pathString,\n      stroke: \"#000000\",\n      fill: \"#000000\",\n      'class': renderer.addClasses('ending')\n    });\n    renderer.renderText(linestartx + 5, renderer.calcY(this.pitch - 0.5), this.text, 'repeatfont', 'ending', \"start\");\n  }\n\n  if (this.anchor2) {\n    lineendx = this.anchor2.x;\n    pathString = sprintf(\"M %f %f L %f %f\", lineendx, y, lineendx, y + height);\n    renderer.printPath({\n      path: pathString,\n      stroke: \"#000000\",\n      fill: \"#000000\",\n      'class': renderer.addClasses('ending')\n    });\n  }\n\n  pathString = sprintf(\"M %f %f L %f %f\", linestartx, y, lineendx, y);\n  renderer.printPath({\n    path: pathString,\n    stroke: \"#000000\",\n    fill: \"#000000\",\n    'class': renderer.addClasses('ending')\n  });\n};\n\nmodule.exports = EndingElem;","map":{"version":3,"sources":["/Users/philbrockman/coding/MusicalGens/app/http/web/app/node_modules/abcjs/src/write/abc_ending_element.js"],"names":["sprintf","require","EndingElem","text","anchor1","anchor2","endingHeightAbove","pitch","undefined","prototype","setUpperAndLowerElements","positionY","draw","renderer","linestartx","lineendx","window","console","error","y","calcY","height","pathString","x","w","printPath","path","stroke","fill","addClasses","renderText","module","exports"],"mappings":"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","sourcesContent":["//    abc_ending_element.js: Definition of the EndingElement class.\n//    Copyright (C) 2010-2018 Gregory Dyke (gregdyke at gmail dot com) and Paul Rosen\n//\n//    Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated\n//    documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation\n//    the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and\n//    to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n//\n//    The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n//\n//    THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING\n//    BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n//    NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n//    DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n//    OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar sprintf = require('./sprintf');\n\nvar EndingElem = function EndingElem(text, anchor1, anchor2) {\n\tthis.text = text; // text to be displayed top left\n\tthis.anchor1 = anchor1; // must have a .x property or be null (means starts at the \"beginning\" of the line - after keysig)\n\tthis.anchor2 = anchor2; // must have a .x property or be null (means ends at the end of the line)\n\tthis.endingHeightAbove = 5;\n\tthis.pitch = undefined; // This will be set later\n};\n\nEndingElem.prototype.setUpperAndLowerElements = function(positionY) {\n\tthis.pitch = positionY.endingHeightAbove - 2;\n};\n\nEndingElem.prototype.draw = function (renderer, linestartx, lineendx) {\n\tif (this.pitch === undefined)\n\t\twindow.console.error(\"Ending Element y-coordinate not set.\");\n\tvar y = renderer.calcY(this.pitch);\n\tvar height = 20;\n\tvar pathString;\n\tif (this.anchor1) {\n\t\tlinestartx = this.anchor1.x+this.anchor1.w;\n\t\tpathString = sprintf(\"M %f %f L %f %f\",\n\t\t\tlinestartx, y, linestartx, y+height);\n\t\trenderer.printPath({path:pathString, stroke:\"#000000\", fill:\"#000000\", 'class': renderer.addClasses('ending')});\n\t\trenderer.renderText(linestartx+5, renderer.calcY(this.pitch-0.5), this.text, 'repeatfont', 'ending',\"start\");\n\t}\n\n\tif (this.anchor2) {\n\t\tlineendx = this.anchor2.x;\n\t\tpathString = sprintf(\"M %f %f L %f %f\",\n\t\t\tlineendx, y, lineendx, y+height);\n\t\trenderer.printPath({path:pathString, stroke:\"#000000\", fill:\"#000000\", 'class': renderer.addClasses('ending')});\n\t}\n\n\n\tpathString = sprintf(\"M %f %f L %f %f\",\n\t\tlinestartx, y, lineendx, y);\n\trenderer.printPath({path:pathString, stroke:\"#000000\", fill:\"#000000\", 'class': renderer.addClasses('ending')});\n};\n\nmodule.exports = EndingElem;\n"]},"metadata":{},"sourceType":"script"}