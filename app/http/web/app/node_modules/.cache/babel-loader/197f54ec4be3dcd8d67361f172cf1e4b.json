{"ast":null,"code":"//    abc_create_key_signature.js\n//    Copyright (C) 2010-2018 Gregory Dyke (gregdyke at gmail dot com) and Paul Rosen\n//\n//    Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated\n//    documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation\n//    the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and\n//    to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n//\n//    The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n//\n//    THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING\n//    BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n//    NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n//    DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n//    OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\nvar AbsoluteElement = require('./abc_absolute_element');\n\nvar glyphs = require('./abc_glyphs');\n\nvar RelativeElement = require('./abc_relative_element');\n\nvar parseCommon = require('../parse/abc_common');\n\nvar createKeySignature;\n\n(function () {\n  \"use strict\";\n\n  createKeySignature = function (elem, tuneNumber) {\n    if (!elem.accidentals || elem.accidentals.length === 0) return null;\n    var abselem = new AbsoluteElement(elem, 0, 10, 'staff-extra', tuneNumber);\n    var dx = 0;\n    parseCommon.each(elem.accidentals, function (acc) {\n      var symbol = acc.acc === \"sharp\" ? \"accidentals.sharp\" : acc.acc === \"natural\" ? \"accidentals.nat\" : \"accidentals.flat\"; //var notes = { 'A': 5, 'B': 6, 'C': 0, 'D': 1, 'E': 2, 'F': 3, 'G':4, 'a': 12, 'b': 13, 'c': 7, 'd': 8, 'e': 9, 'f': 10, 'g':11 };\n\n      abselem.addRight(new RelativeElement(symbol, dx, glyphs.getSymbolWidth(symbol), acc.verticalPos, {\n        thickness: glyphs.symbolHeightInPitches(symbol)\n      }));\n      dx += glyphs.getSymbolWidth(symbol) + 2;\n    }, this);\n    return abselem;\n  };\n})();\n\nmodule.exports = createKeySignature;","map":{"version":3,"sources":["/Users/philbrockman/coding/MusicalGens/app/http/web/app/node_modules/abcjs/src/write/abc_create_key_signature.js"],"names":["AbsoluteElement","require","glyphs","RelativeElement","parseCommon","createKeySignature","elem","tuneNumber","accidentals","length","abselem","dx","each","acc","symbol","addRight","getSymbolWidth","verticalPos","thickness","symbolHeightInPitches","module","exports"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,IAAIA,eAAe,GAAGC,OAAO,CAAC,wBAAD,CAA7B;;AACA,IAAIC,MAAM,GAAGD,OAAO,CAAC,cAAD,CAApB;;AACA,IAAIE,eAAe,GAAGF,OAAO,CAAC,wBAAD,CAA7B;;AAEA,IAAIG,WAAW,GAAGH,OAAO,CAAC,qBAAD,CAAzB;;AAEA,IAAII,kBAAJ;;AAEA,CAAC,YAAW;AACX;;AAEAA,EAAAA,kBAAkB,GAAG,UAASC,IAAT,EAAeC,UAAf,EAA2B;AAC/C,QAAI,CAACD,IAAI,CAACE,WAAN,IAAqBF,IAAI,CAACE,WAAL,CAAiBC,MAAjB,KAA4B,CAArD,EACC,OAAO,IAAP;AACD,QAAIC,OAAO,GAAG,IAAIV,eAAJ,CAAoBM,IAApB,EAA0B,CAA1B,EAA6B,EAA7B,EAAiC,aAAjC,EAAgDC,UAAhD,CAAd;AACA,QAAII,EAAE,GAAG,CAAT;AACAP,IAAAA,WAAW,CAACQ,IAAZ,CAAiBN,IAAI,CAACE,WAAtB,EAAmC,UAASK,GAAT,EAAc;AAChD,UAAIC,MAAM,GAAID,GAAG,CAACA,GAAJ,KAAY,OAAb,GAAwB,mBAAxB,GAA+CA,GAAG,CAACA,GAAJ,KAAY,SAAb,GAA0B,iBAA1B,GAA8C,kBAAzG,CADgD,CAEhD;;AACAH,MAAAA,OAAO,CAACK,QAAR,CAAiB,IAAIZ,eAAJ,CAAoBW,MAApB,EAA4BH,EAA5B,EAAgCT,MAAM,CAACc,cAAP,CAAsBF,MAAtB,CAAhC,EAA+DD,GAAG,CAACI,WAAnE,EAAgF;AAACC,QAAAA,SAAS,EAAEhB,MAAM,CAACiB,qBAAP,CAA6BL,MAA7B;AAAZ,OAAhF,CAAjB;AACAH,MAAAA,EAAE,IAAIT,MAAM,CAACc,cAAP,CAAsBF,MAAtB,IAAgC,CAAtC;AACA,KALD,EAKG,IALH;AAMA,WAAOJ,OAAP;AACA,GAZD;AAaA,CAhBD;;AAkBAU,MAAM,CAACC,OAAP,GAAiBhB,kBAAjB","sourcesContent":["//    abc_create_key_signature.js\n//    Copyright (C) 2010-2018 Gregory Dyke (gregdyke at gmail dot com) and Paul Rosen\n//\n//    Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated\n//    documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation\n//    the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and\n//    to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n//\n//    The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n//\n//    THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING\n//    BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n//    NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n//    DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n//    OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar AbsoluteElement = require('./abc_absolute_element');\nvar glyphs = require('./abc_glyphs');\nvar RelativeElement = require('./abc_relative_element');\n\nvar parseCommon = require('../parse/abc_common');\n\nvar createKeySignature;\n\n(function() {\n\t\"use strict\";\n\n\tcreateKeySignature = function(elem, tuneNumber) {\n\t\tif (!elem.accidentals || elem.accidentals.length === 0)\n\t\t\treturn null;\n\t\tvar abselem = new AbsoluteElement(elem, 0, 10, 'staff-extra', tuneNumber);\n\t\tvar dx = 0;\n\t\tparseCommon.each(elem.accidentals, function(acc) {\n\t\t\tvar symbol = (acc.acc === \"sharp\") ? \"accidentals.sharp\" : (acc.acc === \"natural\") ? \"accidentals.nat\" : \"accidentals.flat\";\n\t\t\t//var notes = { 'A': 5, 'B': 6, 'C': 0, 'D': 1, 'E': 2, 'F': 3, 'G':4, 'a': 12, 'b': 13, 'c': 7, 'd': 8, 'e': 9, 'f': 10, 'g':11 };\n\t\t\tabselem.addRight(new RelativeElement(symbol, dx, glyphs.getSymbolWidth(symbol), acc.verticalPos, {thickness: glyphs.symbolHeightInPitches(symbol)}));\n\t\t\tdx += glyphs.getSymbolWidth(symbol) + 2;\n\t\t}, this);\n\t\treturn abselem;\n\t};\n})();\n\nmodule.exports = createKeySignature;\n"]},"metadata":{},"sourceType":"script"}